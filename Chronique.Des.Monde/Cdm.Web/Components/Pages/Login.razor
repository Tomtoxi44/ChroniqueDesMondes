@page "/login"
@using Cdm.Web.Services.Authentication
@using Microsoft.AspNetCore.WebUtilities

<PageTitle>Connexion - Chronique des Mondes</PageTitle>

<div class="login-container animate-fade-in">
    <div class="login-card card">
        <div class="login-header">
            <img src="/images/icon_cdm.svg" alt="Chronique des Mondes" class="logo animate-pulse" />
            <h1 class="login-title">Chronique des Mondes</h1>
            <p class="login-subtitle">Entrez dans l'aventure</p>
        </div>

        <div class="login-form">
            <!-- Utilisation d'un form HTML classique pour éviter les problèmes de headers -->
            <form method="post" action="/auth/login">
                @if (!string.IsNullOrEmpty(errorMessage))
                {
                    <div class="alert alert-error animate-fade-in">
                        @errorMessage
                    </div>
                }

                <div class="form-group">
                    <label class="form-label" for="username">Adresse email</label>
                    <input type="email" name="username" class="form-control" id="username" placeholder="votre@email.com" required />
                </div>

                <div class="form-group">
                    <label class="form-label" for="password">Mot de passe</label>
                    <input type="password" name="password" class="form-control" id="password" placeholder="Votre mot de passe" required />
                </div>

                <div class="form-group remember-me">
                    <label class="checkbox-label">
                        <input type="checkbox" name="rememberMe" />
                        <span class="checkmark"></span>
                        Se souvenir de moi
                    </label>
                </div>

                <div class="form-actions">
                    <button type="submit" class="btn btn-primary login-btn">
                        <span>Se connecter</span>
                    </button>
                </div>
            </form>

            <div class="login-footer">
                <p>Pas encore de compte ?</p>
                <a href="/register" class="btn btn-secondary">Créer un compte</a>
            </div>
        </div>
    </div>
</div>